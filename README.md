# Контрольная работа №1 (пункты 11, 14, 50)
**Сделано на паре 22.10.25**\n
**Дисциплина:** Информационная безопасность и защита информации  
**Студент:** Куспеков Сергей Дмитриевич, группа УИБО-02-24  
**Организация для примера:** КДЦ МЕДСИ на Красной Пресне (головная клиника сети)  

> КДЦ МЕДСИ на Красной Пресне указан как ключевой центр сети, оказывающий широкий спектр услуг; сеть использует цифровые сервисы (портал/приложение SmartMed) для записи, хранения меддокументов и онлайн-оплаты.

---

## 11) SQL-инъекция: определение и предотвращение (на примере МЕДСИ/SmartMed)

**Определение.** SQL-инъекция — это внедрение злоумышленником фрагментов SQL в запрос приложения через непроверенный ввод, что позволяет читать/изменять данные, обходить аутентификацию и выполнять опасные операции в БД. 

**Релевантность для примера.** В онлайн-записи, личном кабинете и оплате в SmartMed пользователи вводят и фильтруют данные (по врачу/дате/филиалу; доступны просмотр меддокументов и оплата) — эти точки требуют строгой защиты от SQLi.
**Базовые меры предотвращения (минимум, который должен быть реализован):**
1. **Параметризованные запросы / prepared statements** вместо конкатенации строк.
2. **Allow-list валидация ввода** (типы, форматы, допустимые поля сортировки и т.п.). 
3. **Минимальные привилегии БД-учёток** (разделяйте чтение/запись, запрещайте DDL и опасные функции). 
4. **Безопасная обработка ошибок** (не утечка текстов SQL/стеков пользователю). 
5. **Тестирование безопасности (DAST/SAST, ручные проверки)**; WAF — как дополнительный слой, не замена фиксу в коде.

---

## 14) XXE-инъекции: возможные последствия и почему это важно для клиники

**Суть уязвимости.** XXE возникает, когда XML-парсер с разрешёнными внешними сущностями (DTD/External Entities) обрабатывает непроверенный XML. Безопасная практика — **полностью отключать DTD/External Entities** во всех парсерах.

**Последствия XXE:**
- **Разглашение данных** (чтение локальных файлов, например `/etc/passwd`). 
- **SSRF** — вынуждение сервера обращаться к внутренним сервисам/метаданным. 
- **Отказ в обслуживании (DoS)** через «billion laughs» и др. экспоненциальные развёртки.

**Релевантность для примера.** В медицинских интеграциях часто применяются XML/SOAP-взаимодействия; для систем уровня МЕДСИ следует инвентаризовать все точки XML-парсинга и принудительно отключить DTD/External Entities, добавить валидацию схем и негативные тесты. 

**Практические меры:**
1. **Отключить DTD/External Entities** во всех XML-парсерах; применять рекомендации OWASP.
2. **Валидация XML по XSD/схемам**, отказ от небезопасных конструктов. 
3. **Изоляция интеграционных узлов и мониторинг исходящего трафика** (детектирование SSRF-аномалий).

---

## 50) Как определить критичные бизнес-процессы, подверженные наибольшему риску взлома (и пример TOP для МЕДСИ)

**Методика (коротко):**
1. **Картирование процессов и активов**: описать ключевые процессы, данные (классы чувствительности), ИТ-системы, внешние зависимости. (Основы риск-менеджмента ИБ.) 
2. **BIA — анализ влияния на бизнес**: оценить последствия простоя (финансы, регуляторика/ПДн, имидж), задать RTO/RPO. Рекомендации — NIST SP 800-34 Rev.1. 
3. **Оценка угроз/уязвимостей и текущих контролей**, затем **расчёт риска = Вероятность × Влияние** по методике OWASP Risk Rating (факторы угроз, уязвимости, техническое/бизнес-влияние). 
4. **Ранжирование, план обработки и регулярный пересмотр** после изменений архитектуры/инцидентов.
**TOP-5 критичных процессов для КДЦ МЕДСИ (пример):**
1. **Доступ пациентов к меддокументам/истории в SmartMed.**  
   Риски: несанкционированный доступ/утечка ПДн и медтайны, компрометация токенов.  
   Контрмеры: MFA, шифрование «на диске» и «в канале», строгий RBAC, контроль сессий и аномалий. 
2. **Онлайн-запись на приём.**  
   Риски: SQLi в фильтрах/поиске, автоматизированный спам-бронь (боты), подмена расписаний.  
   Контрмеры: параметризация, валидация allow-list, rate-limit/anti-bot, жёсткая журнализация.
3. **Онлайн-оплата услуг (SmartMed).**  
   Риски: перехват/подмена потока, CSRF, утечки плательщиков.  
   Контрмеры: HSTS/HTTPS-везде, строгая CSP, анти-CSRF-токены, сегментация платёжного контура. 
4. **Телемедицина и хранение результатов обследований.**  
   Риски: компрометация видеосессий, утечки вложений/результатов анализов.  
   Контрмеры: защищённые каналы, защита медфайлов, контроль доступа по наименьшим привилегиям. 
5. **Интеграции с внешними системами (в т.ч. XML/SOAP).**  
   Риски: XXE/SSRF, отравление данных, нарушения доступности обмена.  
   Контрмеры: «DTD OFF», валидация схем, allow-list исходящих соединений, сегментация интеграционного сегмента. 

---

## Короткий чек-лист для сдачи

- [ ] Для всех SQL-точек: **prepared statements**, allow-list валидация, least-privilege в БД, единая обработка ошибок, регулярные тесты. 
- [ ] Для всех XML-точек: **запрет DTD/External Entities**, XSD-валидация, изоляция, мониторинг исходящего трафика. 
- [ ] BIA по NIST SP 800-34; критичные процессы ранжированы OWASP Risk Rating; планы обработки и пересмотра утверждены. 

---

### Источники
- **MEDSI/SmartMed (официальные страницы):** описание КДЦ на Красной Пресне; вход/возможности SmartMed; онлайн-оплата и возможности приложения.
- **OWASP:** SQL Injection Prevention Cheat Sheet; OWASP SQL Injection; XXE Prevention Cheat Sheet; XXE (обзор); OWASP Risk Rating. 
- **NIST:** SP 800-34 Rev.1 (Contingency Planning Guide / BIA). 

